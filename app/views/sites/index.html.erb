<%= render("waste_exemptions_engine/shared/back", back_path: registration_path(reference: @resource.reference)) %>

<h1 class="govuk-heading-l">
  <%= t(".heading") %>
</h1>

<% if @resource.present? %>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <table class="govuk-table" aria-label="<%= t(".heading") %>">
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th class="govuk-table__header" scope="col"><%= t(".labels.reference") %></th>
            <th class="govuk-table__header" scope="col"><%= t(".labels.location") %></th>
            <th class="govuk-table__header" scope="col"><%= t(".labels.details") %></th>
            <th class="govuk-table__header" scope="col"><%= t(".labels.ea_area") %></th>
            <th class="govuk-table__header" scope="col"><%= t(".labels.status") %></th>
            <th class="govuk-table__header" scope="col"><%= t(".labels.ceased_or_revoked") %></th>
            <th class="govuk-table__header" scope="col"><%= t(".labels.actions") %></th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <% @site_addresses.each do |site_address| %>
             <tr class="govuk-table__row">
              <td class="govuk-table__cell">
                <%= site_address.reference %>
              </td>
              <td class="govuk-table__cell">
                <%=
                  if site_address.located_by_grid_reference?
                    site_address.grid_reference
                  else
                    displayable_address(site_address).join(", ")
                  end
                %>
              </td>
              <td class="govuk-table__cell">
                <%= site_address.description %>
              </td>
              <td class="govuk-table__cell">
                <%= site_address.area %>
              </td>
              <td class="govuk-table__cell">
                <%= site_address.site_status %>
              </td>
              <td class="govuk-table__cell">
                <%= site_address.ceased_or_revoked_exemptions %>
              </td>
              <td class="govuk-table__cell">
                <%= link_to t('.actions.exemptions'), '#', class: "govuk-link" %>
                <%= link_to t('.actions.deregister'), '#', class: "govuk-link" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <nav role="navigation" class="pagination" aria-label="Pagination">
        <div class="pagination__summary govuk-body">
          <%= page_entries_info @site_addresses, entry_name: "item" %>
        </div>
        <span class="govuk-body">
          <%= paginate @site_addresses %>
        </span>
      </nav>
    </div>
  </div>
<% end %>
