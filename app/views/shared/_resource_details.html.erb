<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h2 class="govuk-heading-m">
      <%= t(".subheadings.applicant") %>
    </h2>

    <% if applicant_data_present?(resource) %>
      <dl class="govuk-summary-list">
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            <%= t(".labels.applicant_first_name") %>
          </dt>
          <dd class="govuk-summary-list__value">
            <%= resource.applicant_first_name %>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            <%= t(".labels.applicant_last_name") %>
          </dt>
          <dd class="govuk-summary-list__value">
            <%= resource.applicant_last_name %>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            <%= t(".labels.applicant_phone") %>
          </dt>
          <dd class="govuk-summary-list__value">
            <%= resource.applicant_phone %>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            <%= t(".labels.applicant_email") %>
          </dt>
          <dd class="govuk-summary-list__value">
            <%= resource.applicant_email %>
          </dd>
        </div>
      </dl>
    <% else %>
      <p class="govuk-body">
        <%= t(".no_applicant_data") %>
      </p>
    <% end %>

    <h2 class="govuk-heading-m">
      <%= t(".subheadings.contact") %>
    </h2>

    <% if contact_data_present?(resource) %>
      <dl class="govuk-summary-list">
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            <%= t(".labels.contact_first_name") %>
          </dt>
          <dd class="govuk-summary-list__value">
            <%= resource.contact_first_name %>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            <%= t(".labels.contact_last_name") %>
          </dt>
          <dd class="govuk-summary-list__value">
            <%= resource.contact_last_name %>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            <%= t(".labels.contact_phone") %>
          </dt>
          <dd class="govuk-summary-list__value">
            <%= resource.contact_phone %>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            <%= t(".labels.contact_email") %>
          </dt>
          <dd class="govuk-summary-list__value">
            <%= resource.contact_email %>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            <%= t(".labels.contact_position") %>
          </dt>
          <dd class="govuk-summary-list__value">
            <%= resource.contact_position %>
          </dd>
        </div>
      </dl>
    <% else %>
      <p class="govuk-body">
        <%= t(".no_contact_data") %>
      </p>
    <% end %>

  <h2 class="govuk-heading-m">
    <%= t(".subheadings.current_balance") %>
  </h2>

  <% if resource.is_a?(WasteExemptionsEngine::Registration) %>
    <dl class="govuk-summary-list">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          <%= t(".labels.amount") %>
        </dt>
        <dd class="govuk-summary-list__value">
          <%= display_pence_as_pounds_sterling_and_pence(pence: resource.account.balance) if resource.account&.balance.present? %>
        </dd>
      </div>
    </dl>
  <% end %>

  </div>

  <div class="govuk-grid-column-one-third">
    <%= render("shared/resource_details_actions", resource: @resource) %>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <% if resource.registration_exemptions.present? %>
      <%= render("shared/resource_exemptions_list",
                 resource_exemptions: resource
                                        .registration_exemptions
                                        .includes(:exemption)
                                        .order_by_state_then_exemption_id) %>
    <% else %>
      <h2 class="govuk-heading-m">
        <%= t(".subheadings.exemptions") %>
      </h2>
      <p class="govuk-body">
        <%= t(".no_exemptions") %>
      </p>
    <% end %>
  </div>
</div>

<dl class="govuk-summary-list">
  <% if resource.site_addresses.any? %>
    <%= render("shared/resource_site_addresses", resource: resource) %>
  <% end %>

  <%= render("shared/resource_farming", is_a_farmer: resource.is_a_farmer?, on_a_farm: resource.on_a_farm?) %>

  <% if resource.contact_address.present? %>
    <%= render("shared/resource_address", address: resource.contact_address) %>
  <% end %>

  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">
      <%= t(".subheadings.business_or_organisation_details") %>
    </dt>
    <dd class="govuk-summary-list__value">
      <p class="govuk-body govuk-!-font-weight-bold">
        <%= t(".labels.business_or_organisation_name") %>
      </p>
      <p class="govuk-body">
        <%= resource.operator_name %>
      </p>
      <p class="govuk-body govuk-!-font-weight-bold">
        <%= t(".labels.business_or_organisation_type") %>
      </p>
      <p class="govuk-body">
        <%= t(".values.business_or_organisation_type.#{resource.business_type}") %>
      </p>
      <% if resource.company_no.present? %>
        <p class="govuk-body govuk-!-font-weight-bold">
          <%= t(".labels.company_no") %>
        </p>
        <p class="govuk-body">
          <%= resource.company_no %>
        </p>
      <% end %>
    </dd>
  </div>

  <% if resource.operator_address.present? %>
    <%= render("shared/resource_address", address: resource.operator_address) %>
  <% end %>

  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">
      <%= t(".subheadings.assistance_mode") %>
    </dt>
    <dd class="govuk-summary-list__value">
      <p class="govuk-body">
        <%= t(".values.assistance_mode.#{resource.assistance_mode || "none"}") %>
      </p>
    </dd>
  </div>

  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">
      <%= t(".subheadings.renewal_history") %>
    </dt>
    <dd class="govuk-summary-list__value">
      <p class="govuk-body">
        <%= "#{resource.reference} #{registration_date_range(resource)} #{t(".this_registration")}" %>
      </p>
      <% renewal_history(resource)[1..].each do |registration| %>
        <p>
          <%= registration_details_link_with_dates(registration) %>
        <p>
      <% end %>
    </div>
  </div>
</dl>

<% if resource.people.present? %>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <details class="govuk-details">
        <summary class="govuk-details__summary">
          <span class="govuk-details__summary-text">
            <%= t(".labels.people") %>
          </span>
        </summary>
        <div class="govuk-details__text">
          <%= render("shared/resource_people_list",
                     resource_people: resource.people) %>
        </div>
      </details>
    </div>
  </div>
<% end %>
