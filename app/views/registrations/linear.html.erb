<%= render("waste_exemptions_engine/shared/back", back_path: root_path) %>

<h1 class="govuk-heading-l">
  <%= t(".heading") %>
</h1>


  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <table class="govuk-table" aria-label="<%= t(".heading") %>">
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th class="govuk-table__header" scope="col"><%= t(".labels.status") %></th>
            <th class="govuk-table__header" scope="col"><%= t(".labels.name") %></th>
            <th class="govuk-table__header" scope="col"><%= t(".labels.reference") %></th>
            <th class="govuk-table__header" scope="col"><%= t(".labels.contact") %></th>
            <th class="govuk-table__header" scope="col"><%= t(".labels.grid_reference") %></th>
            <th class="govuk-table__header" scope="col"><%= t(".labels.area") %></th>
            <th class="govuk-table__header" scope="col"><%= t(".labels.actions") %></th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <% if @registrations.count.positive? %>
            <% @registrations.each do |registration| %>
              <tr class="govuk-table__row">
                <td class="govuk-table__cell">
                  <%= registration.state %>
                </td>
                <td class="govuk-table__cell">
                  <%= registration.operator_name %>
                </td>
                <td class="govuk-table__cell">
                  <%= registration.reference %>
                </td>
                <td class="govuk-table__cell">
                  <%= registration.contact_first_name %> <%= registration.contact_last_name %>
                </td>
                <td class="govuk-table__cell">
                  <%= registration.site_address.grid_reference %>
                </td>
                <td class="govuk-table__cell">
                  <%= registration.site_address.area %>
                </td>
                <td class="govuk-table__cell">
                  <%= link_to t('.actions.view'), registration_path(reference: registration.reference), class: "govuk-link" %>
                </td>
              </tr>
            <% end %>
          <% else %>
            <tr class="govuk-table__row">
              <td colspan="7" class="govuk-table__cell"><% t(".no_results") %></td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <nav role="navigation" class="pagination" aria-label="Pagination">
        <div class="pagination__summary govuk-body">
          <%= page_entries_info @registrations, entry_name: "item" %>
        </div>
        <span class="govuk-body">
          <%= paginate @registrations %>
        </span>
      </nav>
    </div>
  </div>

